!function(e){function t(t){for(var a,i,l=t[0],c=t[1],s=t[2],u=0,m=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(d&&d(t);m.length;)m.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,l=1;l<n.length;l++){var c=n[l];0!==o[c]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={1:0},r=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/docs/";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var d=c;r.push([164,0,3]),n()}({151:function(e,t,n){"use strict";(function(e){var a=n(3),o=n(0),r=n.n(o),i=n(152),l=n(161);const c=e.env.SIMULATED_DATA,s=a.b.div.withConfig({componentId:"sc-2wu078-0"})({margin:"0 auto",minHeight:"100vh",padding:"50px 0",width:690});t.a=()=>r.a.createElement(s,null,r.a.createElement(l.a,{simulatedData:c}),r.a.createElement(i.a,null))}).call(this,n(59))},152:function(e,t,n){"use strict";var a=n(0),o=n.n(a);const r=n(3).b.div.withConfig({componentId:"ohk7un-0"})({});t.a=()=>o.a.createElement(r,null,o.a.createElement("h1",null,"Dock Defenders"),o.a.createElement("p",null,"bla bla"),o.a.createElement("h2",null,"H2"),o.a.createElement("p",null,"content"))},161:function(e,t,n){"use strict";var a=n(156),o=n.n(a),r=n(0),i=n.n(r),l=n(3);const c=l.b.div.withConfig({componentId:"sc-1h8u7hl-0"})({display:"flex",marginTop:30}),s=l.b.button.withConfig({componentId:"sc-1h8u7hl-1"})(({bgColor:e,disabled:t})=>({alignItems:"center",backgroundColor:e,borderRadius:8,cursor:"pointer",display:"flex",fontSize:15,height:36,justifyContent:"center",opacity:t?.7:1,outline:0,width:100})),d=Object(l.b)(s).withConfig({componentId:"sc-1h8u7hl-2"})({"&:hover":{backgroundColor:"#ededed",color:"black"},backgroundColor:"#3c3938",color:"white",transition:"all 0.5s ease",width:120});var u=({handleClickSubmit:e,launchState:t})=>i.a.createElement(c,null,i.a.createElement(d,{onClick:e,type:"button"},0===t.current?"Simulate":"Start Over"));var m={darkGrey:"#242424",magenta:"#59fff7",paleGray:"#d7d7d7",paleMagenta:"#59fff7ba"};const p=l.b.div.withConfig({componentId:"sc-1249y87-0"})({backgroundColor:m.darkGrey,borderRadius:2,flexGrow:0,padding:"0 8 8 8"}),f=l.b.p.withConfig({componentId:"sc-1249y87-1"})({color:m.paleGray,display:"flex",fontSize:"0.8em",fontWeight:600,justifyContent:"center",letterSpacing:"0.04em",padding:"4 0"});var g=({children:e,className:t,title:n})=>i.a.createElement(p,{className:t},i.a.createElement(f,null,n),i.a.createElement("div",null,e));const b=Object(l.b)(g).withConfig({componentId:"mhxok3-0"})({}),h=l.b.p.withConfig({componentId:"mhxok3-1"})({"& span":{marginRight:"0.4em"}}),v=l.b.p.withConfig({componentId:"mhxok3-2"})({"& .high":{color:"red"},"& .low":{color:"#5cfd56"},"& .medium":{color:"yellow"},"&>span":{marginRight:"0.4em"},fontSize:"0.92em"});var y=({dashboardData:e})=>{const t=function(e){const{audioAcc:t,isTargetFoundOnAudio:n,isTargetFoundOnVideo:a,videoAcc:o}=e;if(n&&a)return i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,"Drone"),i.a.createElement("span",{className:"high"},"very likely"),i.a.createElement("span",null,"near"),`(${Math.max(t,o)})`);if(n)return i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,"Drone"),i.a.createElement("span",{className:"medium"},"likely"),i.a.createElement("span",null,"near"),i.a.createElement("span",null,`(${t})`));if(a)return i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,"Drone"),i.a.createElement("span",{className:"medium"},"likely"),i.a.createElement("span",null,"near"),i.a.createElement("span",null,`(${o})`));return i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,"Drone"),i.a.createElement("span",{className:"low"},"less likely"),i.a.createElement("span",null,"near"))}(e);return i.a.createElement(b,null,i.a.createElement(h,null,i.a.createElement("span",null,"Time Elapsed:"),i.a.createElement("span",null,e.displayTime)),i.a.createElement(v,null,t))};var w=n(35);const E=Object(l.b)(g).withConfig({componentId:"sc-306ynt-0"})(({isActive:e})=>({backgroundColor:e?m.paleMagenta:m.darkGrey,marginLeft:0,transition:e?"none":"background-color 0.9s ease"})),k=l.b.div.withConfig({componentId:"sc-306ynt-1"})({"& canvas":{height:85,width:194},backgroundColor:"#2b2b2b",position:"relative"}),x=l.b.div.withConfig({componentId:"sc-306ynt-2"})({backgroundColor:"#0000007a",fontSize:"0.7em",left:0,padding:"1px 3px",position:"absolute",top:0}),C=l.b.div.withConfig({componentId:"sc-306ynt-3"})({"& img":{height:70,position:"absolute",transform:"translateX(194px)",transition:"all 0.5s ease",width:194},height:70,overflow:"hidden",position:"relative",width:194});var S=({dashboardData:e,spectrogramRef:t})=>{const[n,a]=i.a.useState(!1),[,o]=i.a.useState(),r=i.a.useRef([]),l=i.a.useRef(null),c=i.a.useRef(null);return i.a.useEffect(()=>{const{audio:t,isTargetFoundOnAudio:n}=e,s=r.current;let d;if(n&&(a(!0),d=setTimeout(()=>{a(!1)},100)),t.file&&l.current!==t.file){const e=c.current;for(let t=0;t<e.children.length;t+=1){const n=e.children[t],a=Number(n.getAttribute("data-age"))+1;n.setAttribute("data-age",a.toString()),n.setAttribute("style",`transform: translateX(-${194*a}px);`)}s.length>2&&s.shift(),s.push(i.a.createElement("img",{alt:"spectrogram","data-age":-1,key:t.file,src:`/docs/assets/spectrograms/${t.file}`})),l.current=t.file,o({})}return()=>{clearTimeout(d)}},[l,t,e,e.displayTime]),i.a.createElement(E,{isActive:n,title:"Microphone"},i.a.createElement("div",null,i.a.createElement(k,null,i.a.createElement("canvas",{ref:t}),i.a.createElement(x,null,"Sampling rate: 0.2Hz")),i.a.createElement(C,{ref:c},r.current)))};const O=Object(l.b)(g).withConfig({componentId:"sc-4f08pd-0"})({backgroundColor:m.darkGrey}),T=l.b.div.withConfig({componentId:"sc-4f08pd-1"})({"&>span":{marginRight:5}}),I=l.b.div.withConfig({componentId:"sc-4f08pd-2"})({height:230,overflow:"scroll"}),A=l.b.span.withConfig({componentId:"sc-4f08pd-3"})(({active:e})=>({color:e?m.magenta:"inherit"})),D=({data:e,displayTime:t,isTargetFound:n,type:a})=>{const o=i.a.useRef(null),{payload:r=[]}=e;let l=i.a.createElement("span",null,"nodrone");if(r.length>0){const{displayName:e}=r[0],t="video"===a?function(e){var t,n,a;const o=j(null===(t=e.imageObjectDetection)||void 0===t?void 0:t.score,3);return`coord(${(null===(n=e.imageObjectDetection)||void 0===n||null===(a=n.boundingBox)||void 0===a?void 0:a.normalizedVertices.map(e=>`${j(e.x,3)},${j(e.y,3)}`)).join("/")}) acc(${o})`}(r[0]):function(e){return`acc(${j(e.classification.score,3)})`}(r[0]);l=i.a.createElement(i.a.Fragment,null,i.a.createElement(A,{active:n,key:e},e),t)}return i.a.useEffect(()=>{r.length>0&&o.current.scrollIntoView({behavior:"smooth"})}),i.a.createElement(T,{ref:o},i.a.createElement("span",null,t),l)};var z=({dashboardData:e,title:t,type:n})=>{const[,a]=i.a.useState(),o=i.a.useRef(null),r=i.a.useRef([]);return i.a.useEffect(()=>{const{audio:t,displayTime:l,isTargetFoundOnAudio:c,isTargetFoundOnVideo:s,tick:d,video:u}=e,m="video"===n?u:t;if(d>0&&o.current!==m.file){const e=i.a.createElement(D,{data:m,displayTime:l,isTargetFound:"video"===n?s:c,key:l,type:n});r.current.push(e),o.current=m.file,a({})}},[r,e,e.displayTime,n]),i.a.createElement(O,{title:t},i.a.createElement(I,null,r.current))};function j(e,t){const n=10**t;return(Math.floor(e*n)/n).toFixed(t)}const R=Object(l.b)(g).withConfig({componentId:"deyk90-0"})(({isActive:e})=>({"& canvas":{height:238.5,position:"absolute",width:424,zIndex:1e3},"& video":{height:238.5,width:424},"&>div":{position:"relative"},backgroundColor:e?m.paleMagenta:m.darkGrey,transition:e?"none":"background-color 0.9s ease"})),F=l.b.div.withConfig({componentId:"deyk90-1"})({backgroundColor:"#0000007a",fontSize:"0.7em",left:0,padding:"1px 3px",position:"absolute",top:0});var M=({dashboardData:e,videoRef:t})=>{const n=i.a.useRef(null),[a,o]=i.a.useState(!1);return i.a.useEffect(()=>{const{isTargetFoundOnVideo:t,video:a}=e,{payload:r}=a,i=n.current,l=i.getContext("2d");if(l.clearRect(0,0,i.width,i.height),r&&r.length>0&&i){var c;const{height:e,width:t}=i,{normalizedVertices:n}=null===(c=r[0].imageObjectDetection)||void 0===c?void 0:c.boundingBox,a=t*n[0].x,o=e*n[0].y,s=t*(n[1].x-n[0].x),d=e*(n[1].y-n[0].y);l.beginPath(),l.strokeStyle=m.magenta,l.lineWidth=2,l.strokeRect(a,o,s,d)}let s;return t&&(o(!0),s=setTimeout(()=>{o(!1)},100)),()=>{clearTimeout(s)}},[e,e.displayTime,t]),i.a.createElement(R,{isActive:a,title:"Camera"},i.a.createElement("div",null,i.a.createElement(F,null,"Sampling rate: 1Hz"),i.a.createElement("canvas",{ref:n}),i.a.createElement("video",{ref:t},i.a.createElement("source",{src:"/docs/assets/quadcopter_002_merged.mp4",type:"video/mp4"}),"Your browser does not support the video tag.")))};const _=l.b.div.withConfig({componentId:"sc-1vxfgs3-0"})({backgroundColor:"#121111",color:"white",fontFamily:'Helvetica, Arial, "Sans-Serif"',fontSize:"0.95em",padding:"10 10"}),P=l.b.div.withConfig({componentId:"sc-1vxfgs3-1"})({display:"flex",justifyContent:"center"}),G=l.b.div.withConfig({componentId:"sc-1vxfgs3-2"})(({_width:e})=>({"&:last-child":{marginLeft:10},"&>div":{width:e},"&>div:not(:first-child)":{marginTop:10},alignItems:"center",display:"flex",flexDirection:"column",flexGrow:0}));t.a=({simulatedData:e})=>{const t=i.a.useRef(0),[,n]=i.a.useState(),a=i.a.useCallback(e=>{t.current=e,n({})},[]),r=i.a.useRef(null),l=i.a.useRef(null),c=i.a.useRef({audio:{},audioAcc:0,displayTime:"00:00",isTargetFoundOnAudio:!1,isTargetFoundOnVideo:!1,targetLabel:"drone",tick:0,video:{},videoAcc:0}),s=i.a.useCallback(function({dashboardData:e,launchState:t,setLaunchState:n,simulatedData:a,spectrogramRef:r,updateState:i,videoRef:l}){return()=>{const c=Math.max(a.audio.lengh,a.video.length),s=setInterval((function(){const n=e.current;if(n.tick===c||0===t.current)return void clearInterval(s);if(n.tick+=1,n.displayTime=function(e){const t=Math.floor(e/60),n=e-60*t;return H(t,"0",2)+":"+H(n,"0",2)}(n.tick),n.video=a.video[u],n.isTargetFoundOnVideo=!1,a.video[u].payload.length>0){var o;const e=a.video[u].payload[0];n.isTargetFoundOnVideo="drone"===e.displayName,n.videoAcc=N(null===(o=e.imageObjectDetection)||void 0===o?void 0:o.score,3)}if(u+=1,n.tick%5==1){if(n.audio=a.audio[d],a.audio[d].payload.length>0){const e=a.audio[d].payload[0];n.isTargetFoundOnAudio="drone"===e.displayName,n.audioAcc=N(e.classification.score,3)}d+=1}i({})}),1e3);let d=0,u=0;Object(w.a)("createHandleClickSubmit(): launchState: %s, simulatedData: %o",t.current,a);const m=l.current,p=r.current;if(0===t.current){n(1);const e="/docs/assets/quadcopter_002_audio_merged.mp3";Object(w.a)("createHandleClickSubmit(): fileUrl: %s",e),null!==e&&o.a.get(e,{responseType:"blob"}).then(e=>{const{data:n}=e;document.getElementById("classification");!function(e,t,n){console.log("drawSpectrogram()");try{new(window.AudioContext||window.webkitAudioContext)}catch(e){return void console.error("Audio API is not available")}const a=t.width,o=new(window.AudioContext||window.webkitAudioContext),r=t.getContext("2d");let i=0;const l=o.createAnalyser();l.smoothingTimeConstant=0,l.fftSize=256;const c=o.createGain();c.gain.value=0;const s=l.frequencyBinCount,d=8*s+1,u=new Uint8Array(s);navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;const m=r.createImageData(2,t.height);for(let e=0;e<4*m.data.length;e+=8)m.data[e]=0,m.data[e+3]=255,m.data[e+4]=255,m.data[e+5]=255,m.data[e+6]=0,m.data[e+7]=255;const p=o.createBufferSource();p.connect(c),c.connect(o.destination);const f=new FileReader;function g(){1===n.current&&requestAnimationFrame(g),l.getByteFrequencyData(u);for(let e=0,t=d;e<s;++e,t-=8)m.data[t-1]=2*u[e],m.data[t]=2*u[e],m.data[t+1]=1*u[e];r.putImageData(m,i,0),i<a?i+=1:i=0}f.onload=e=>{o.decodeAudioData(e.target.result,e=>{p.buffer=e,p.connect(l),p.start(0),g()},e=>{console.log("drawSpectrogram(): erorr",e)})},f.readAsArrayBuffer(e)}(n,p,t),setTimeout(()=>{m.play()},300)})}else n(0),console.log("createHandleclickSubmit(): stop"),setTimeout(()=>{p.getContext("2d").clearRect(0,0,p.width,p.height),m.pause()},300)}}({launchState:t,dashboardData:c,setLaunchState:a,simulatedData:e,spectrogramRef:l,updateState:n,videoRef:r}),[t,a]);return i.a.createElement(_,null,i.a.createElement(P,null,i.a.createElement(G,{_width:440},i.a.createElement(M,{dashboardData:c.current,videoRef:r}),i.a.createElement(z,{dashboardData:c.current,title:"Object detection log",type:"video"})),i.a.createElement(G,{_width:210},i.a.createElement(y,{dashboardData:c.current}),i.a.createElement(S,{dashboardData:c.current,spectrogramRef:l}),i.a.createElement(z,{dashboardData:c.current,title:"Sound classification log",type:"audio"}))),i.a.createElement("div",null,i.a.createElement(u,{handleClickSubmit:s,launchState:t})))};function H(e,t,n){return(new Array(n+1).join(t)+e).slice(-n)}function N(e,t){const n=10**t;return(Math.floor(e*n)/n).toFixed(t)}},162:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(160);const i=o.a.createContext(void 0),l=({children:e,data:t})=>o.a.createElement(i.Provider,{value:t},e);var c=n(35),s=n(157),d=n(3),u=n(151),m=n(75);const p=Object(m.logger)("[sandbox-web]");class f extends o.a.Component{constructor(...e){var t,n,a;super(...e),a={hasError:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){p("ErrorBoundary(): error: %o, info: %o",e,t)}render(){return this.state.hasError?o.a.createElement("h1",null,"Something went wrong."):this.props.children}}var g=f;const b=d.a`
  ${"\n/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}\n/*# sourceMappingURL=normalize.min.css.map */\n"}
`,h=Object(d.a)({"*":{boxSizing:"border-box"},a:{"&:hover":{textDecoration:"none"},color:"inherit",cursor:"pointer",textDecoration:"none",transition:"color 0.5s ease, border-bottom 0.5s ease"},body:{},button:{backgroundColor:"inherit",border:"none",color:"inherit",cursor:"pointer",margin:0,outline:"none",padding:0},html:{fontFamily:'"Helvetica", "Arial", "sans-serif"',fontSize:16,lineHeight:1.51},input:{border:"none",outline:"none"},p:{margin:0},ul:{listStyleType:"none",margin:0,padding:0}}),v=d.b.div.withConfig({componentId:"niagf4-0"})({minWidth:318});var y=Object(s.a)()(()=>o.a.createElement(g,null,o.a.createElement(v,null,o.a.createElement(b,null),o.a.createElement(h,null),o.a.createElement(u.a,null))));t.a=()=>{const e=window.ISOMORPHIC_DATA;return Object(c.a)("window.ISOMORPHIC_DATA: %o",e),o.a.createElement(r.a,null,o.a.createElement(l,{data:e},o.a.createElement(y,null)))}},164:function(e,t,n){"use strict";n.r(t),function(e){var t=n(0),a=n(105),o=n(162),r=n(35);("undefined"!=typeof window&&!window._babelPolyfill||void 0!==e&&!e._babelPolyfill)&&(Object(r.a)("[client] babel-polyfill is imported, since it wasn't imported yet"),n(191)),Object(r.a)("[client] Running in NODE_ENV: %s","production");const i=document.getElementById("app-root");a.hydrate(t.createElement(o.a,null),i)}.call(this,n(51))},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(75);const a=function(){}}});